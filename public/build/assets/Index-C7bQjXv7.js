import{_ as D}from"./AuthenticatedLayout-nwCEQW_C.js";import{q as x,u as S,s as U,g as m,a,d as l,h as F,w as n,b as s,t as p,o as f,f as C,k as y,x as V,i as h,F as I}from"./app-DCFeNiTs.js";import{s as B,a as M,b as T,c as g,d as j,e as O}from"./index-DQuuFziJ.js";import{s as c,a as r}from"./index-DMXFl-X3.js";import"./ApplicationLogo-B6B4ioSt.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";const R={class:"py-12"},q={class:"max-w-7xl mx-auto sm:px-6 lg:px-8"},z={class:"bg-white shadow-sm sm:rounded-lg p-6 overflow-hidden"},G={class:"flex flex-col md:flex-row justify-between items-center mb-6 gap-4"},H={class:"overflow-x-auto"},J={class:"font-semibold"},K={key:0,class:"p-2 bg-green-50 rounded border border-green-100 inline-block min-w-max"},L={class:"flex items-center gap-2 mb-1"},Q={class:"font-bold text-gray-800"},W={class:"text-xs text-gray-600"},X={key:1},Y={class:"flex gap-2"},Z={class:"flex flex-col gap-4 mb-4"},P={class:"flex flex-col gap-2"},ee={key:0,class:"text-red-500"},le={class:"flex flex-col gap-2"},te={key:0,class:"text-red-500"},se={class:"flex flex-col gap-2"},oe={class:"flex flex-col gap-2"},ae={class:"flex justify-end gap-2 border-t pt-4"},pe={__name:"Index",props:{clients:Array},setup(k){const v=x({global:{value:null,matchMode:"contains"}}),d=x(!1),u=x(!1),w=x(null),o=S({name:"",dni:"",phone:"",address:""}),$=()=>{u.value=!1,o.reset(),o.clearErrors(),d.value=!0},N=i=>{u.value=!0,w.value=i.id,o.name=i.name,o.dni=i.dni,o.phone=i.phone,o.address=i.address,d.value=!0},E=()=>{u.value?o.put(route("clients.update",w.value),{onSuccess:()=>d.value=!1}):o.post(route("clients.store"),{onSuccess:()=>{d.value=!1,o.reset()}})},A=i=>{confirm("¿Estás seguro de borrar a "+i.name+"?")&&V.delete(route("clients.destroy",i.id))};return(i,e)=>{const b=U("tooltip");return f(),m(I,null,[a(l(F),{title:"Clientes"}),a(D,null,{header:n(()=>[...e[8]||(e[8]=[s("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Agenda de Clientes ",-1)])]),default:n(()=>[s("div",R,[s("div",q,[s("div",z,[s("div",G,[a(l(B),{iconPosition:"left",class:"w-full md:w-1/2"},{default:n(()=>[a(l(M),null,{default:n(()=>[...e[9]||(e[9]=[s("i",{class:"pi pi-search"},null,-1)])]),_:1}),a(l(c),{modelValue:v.value.global.value,"onUpdate:modelValue":e[0]||(e[0]=t=>v.value.global.value=t),placeholder:"Buscar por nombre o DNI...",class:"w-full"},null,8,["modelValue"])]),_:1}),a(l(r),{label:"Nuevo Cliente",icon:"pi pi-user-plus",onClick:$,severity:"success",class:"w-full md:w-auto"})]),s("div",H,[a(l(T),{value:k.clients,paginator:"",rows:10,stripedRows:"",filters:v.value,"onUpdate:filters":e[1]||(e[1]=t=>v.value=t),globalFilterFields:["name","dni"],tableStyle:"min-width: 50rem"},{empty:n(()=>[...e[10]||(e[10]=[s("div",{class:"text-center p-4"},"No se encontraron clientes.",-1)])]),default:n(()=>[a(l(g),{field:"name",header:"Nombre",sortable:"",style:{width:"25%"}},{body:n(t=>[s("span",J,p(t.data.name),1)]),_:1}),a(l(g),{field:"dni",header:"DNI",style:{width:"15%"}}),a(l(g),{header:"Situación Actual",style:{width:"35%"}},{body:n(t=>[t.data.loans&&t.data.loans.length>0?(f(),m("div",K,[s("div",L,[a(l(j),{severity:"success",value:"PRÉSTAMO ACTIVO",class:"text-[10px]"}),s("span",Q," $"+p(t.data.loans[0].amount),1)]),s("div",W,[e[11]||(e[11]=C(" Faltan pagar ",-1)),s("strong",null,p(t.data.loans[0].pending_installments),1),e[12]||(e[12]=C(" cuotas. ",-1))])])):(f(),m("div",X,[...e[13]||(e[13]=[s("span",{class:"text-gray-400 text-sm italic"},"- Sin deuda activa -",-1)])]))]),_:1}),a(l(g),{header:"Acciones",style:{width:"25%"}},{body:n(t=>[s("div",Y,[y(a(l(r),{icon:"pi pi-eye",text:"",rounded:"",severity:"info",onClick:_=>l(V).get(i.route("clients.show",t.data.id))},null,8,["onClick"]),[[b,"Ver Perfil",void 0,{top:!0}]]),y(a(l(r),{icon:"pi pi-pencil",text:"",rounded:"",severity:"warning",onClick:_=>N(t.data)},null,8,["onClick"]),[[b,"Editar",void 0,{top:!0}]]),y(a(l(r),{icon:"pi pi-trash",text:"",rounded:"",severity:"danger",onClick:_=>A(t.data)},null,8,["onClick"]),[[b,"Eliminar",void 0,{top:!0}]])])]),_:1})]),_:1},8,["value","filters"])])])])]),a(l(O),{visible:d.value,"onUpdate:visible":e[7]||(e[7]=t=>d.value=t),modal:"",header:u.value?"Editar Cliente":"Nuevo Cliente",style:{width:"30rem"}},{default:n(()=>[s("div",Z,[s("div",P,[e[14]||(e[14]=s("label",{for:"name",class:"font-semibold text-gray-700"},"Nombre Completo",-1)),a(l(c),{id:"name",modelValue:l(o).name,"onUpdate:modelValue":e[2]||(e[2]=t=>l(o).name=t),autocomplete:"off"},null,8,["modelValue"]),l(o).errors.name?(f(),m("small",ee,p(l(o).errors.name),1)):h("",!0)]),s("div",le,[e[15]||(e[15]=s("label",{for:"dni",class:"font-semibold text-gray-700"},"DNI",-1)),a(l(c),{id:"dni",modelValue:l(o).dni,"onUpdate:modelValue":e[3]||(e[3]=t=>l(o).dni=t),autocomplete:"off"},null,8,["modelValue"]),l(o).errors.dni?(f(),m("small",te,p(l(o).errors.dni),1)):h("",!0)]),s("div",se,[e[16]||(e[16]=s("label",{for:"phone",class:"font-semibold text-gray-700"},"Teléfono",-1)),a(l(c),{id:"phone",modelValue:l(o).phone,"onUpdate:modelValue":e[4]||(e[4]=t=>l(o).phone=t),autocomplete:"off"},null,8,["modelValue"])]),s("div",oe,[e[17]||(e[17]=s("label",{for:"address",class:"font-semibold text-gray-700"},"Dirección",-1)),a(l(c),{id:"address",modelValue:l(o).address,"onUpdate:modelValue":e[5]||(e[5]=t=>l(o).address=t),autocomplete:"off"},null,8,["modelValue"])])]),s("div",ae,[a(l(r),{type:"button",label:"Cancelar",severity:"secondary",onClick:e[6]||(e[6]=t=>d.value=!1)}),a(l(r),{type:"button",label:u.value?"Actualizar":"Guardar",onClick:E,loading:l(o).processing},null,8,["label","loading"])])]),_:1},8,["visible","header"])]),_:1})],64)}}};export{pe as default};

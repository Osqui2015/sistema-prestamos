import{_ as O}from"./AuthenticatedLayout-nwCEQW_C.js";import{B as S,aI as j,g as x,o as w,b as s,A as g,u as P,q as h,aB as _,a as i,d as n,h as $,w as m,t as u,n as E,F as B}from"./app-DCFeNiTs.js";import{c as D,a as I}from"./index-DMXFl-X3.js";import{s as b}from"./index-C5Nsv1ZJ.js";import"./ApplicationLogo-B6B4ioSt.js";import"./_plugin-vue_export-helper-DlAUqK2U.js";var A={root:{position:"relative"}},F={root:"p-chart"},k=S.extend({name:"chart",classes:F,inlineStyles:A}),V={name:"BaseChart",extends:D,props:{type:String,data:null,options:null,plugins:null,width:{type:Number,default:300},height:{type:Number,default:150},canvasProps:{type:null,default:null}},style:k,provide:function(){return{$pcChart:this,$parentInstance:this}}},C={name:"Chart",extends:V,inheritAttrs:!1,emits:["select","loaded"],chart:null,watch:{data:{handler:function(){this.reinit()},deep:!0},type:function(){this.reinit()},options:function(){this.reinit()}},mounted:function(){this.initChart()},beforeUnmount:function(){this.chart&&(this.chart.destroy(),this.chart=null)},methods:{initChart:function(){var e=this;j(()=>import("./auto-eE5P6S0m.js"),[]).then(function(r){e.chart&&(e.chart.destroy(),e.chart=null),r&&r.default&&(e.chart=new r.default(e.$refs.canvas,{type:e.type,data:e.data,options:e.options,plugins:e.plugins})),e.$emit("loaded",e.chart)})},getCanvas:function(){return this.$canvas},getChart:function(){return this.chart},getBase64Image:function(){return this.chart.toBase64Image()},refresh:function(){this.chart&&this.chart.update()},reinit:function(){this.initChart()},onCanvasClick:function(e){if(this.chart){var r=this.chart.getElementsAtEventForMode(e,"nearest",{intersect:!0},!1),o=this.chart.getElementsAtEventForMode(e,"dataset",{intersect:!0},!1);r&&r[0]&&o&&this.$emit("select",{originalEvent:e,element:r[0],dataset:o})}},generateLegend:function(){if(this.chart)return this.chart.generateLegend()}}};function d(t){"@babel/helpers - typeof";return d=typeof Symbol=="function"&&typeof Symbol.iterator=="symbol"?function(e){return typeof e}:function(e){return e&&typeof Symbol=="function"&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},d(t)}function y(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(t);e&&(o=o.filter(function(l){return Object.getOwnPropertyDescriptor(t,l).enumerable})),r.push.apply(r,o)}return r}function v(t){for(var e=1;e<arguments.length;e++){var r=arguments[e]!=null?arguments[e]:{};e%2?y(Object(r),!0).forEach(function(o){L(t,o,r[o])}):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):y(Object(r)).forEach(function(o){Object.defineProperty(t,o,Object.getOwnPropertyDescriptor(r,o))})}return t}function L(t,e,r){return(e=N(e))in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function N(t){var e=R(t,"string");return d(e)=="symbol"?e:e+""}function R(t,e){if(d(t)!="object"||!t)return t;var r=t[Symbol.toPrimitive];if(r!==void 0){var o=r.call(t,e);if(d(o)!="object")return o;throw new TypeError("@@toPrimitive must return a primitive value.")}return(e==="string"?String:Number)(t)}var T=["width","height"];function U(t,e,r,o,l,c){return w(),x("div",g({class:t.cx("root"),style:t.sx("root")},t.ptmi("root")),[s("canvas",g({ref:"canvas",width:t.width,height:t.height,onClick:e[0]||(e[0]=function(f){return c.onCanvasClick(f)})},v(v({},t.canvasProps),t.ptm("canvas"))),null,16,T)],16)}C.render=U;const M={class:"py-12"},G={class:"max-w-7xl mx-auto sm:px-6 lg:px-8 space-y-6"},K={class:"bg-white p-4 shadow-sm rounded-lg flex flex-col md:flex-row gap-4 items-end"},q={class:"flex flex-col gap-1 w-full md:w-auto"},z={class:"flex flex-col gap-1 w-full md:w-auto"},H={class:"grid grid-cols-1 md:grid-cols-4 gap-4"},W={class:"bg-white p-6 shadow-sm rounded-lg border-l-4 border-red-400"},J={class:"text-2xl font-bold text-red-600"},Q={class:"bg-white p-6 shadow-sm rounded-lg border-l-4 border-blue-400"},X={class:"text-2xl font-bold text-blue-600"},Y={class:"bg-white p-6 shadow-sm rounded-lg border-l-4 border-green-500"},Z={class:"text-3xl font-bold text-green-600"},tt={class:"text-2xl font-bold text-gray-800"},et={class:"bg-white p-6 shadow-sm rounded-lg"},rt={style:{height:"300px"}},dt={__name:"Index",props:{filters:Object,stats:Object,chart:Object},setup(t){const e=t,r=P({start_date:e.filters.start_date,end_date:e.filters.end_date}),o=()=>{r.get(route("reports.index"),{preserveScroll:!0})},l=h(null),c=h({responsive:!0,maintainAspectRatio:!1,plugins:{legend:{display:!1}}});return _(()=>{l.value={labels:e.chart.labels,datasets:[{label:"Cobros del Día",data:e.chart.data,backgroundColor:"rgba(34, 197, 94, 0.2)",borderColor:"rgba(34, 197, 94, 1)",borderWidth:2,fill:!0,tension:.4}]}}),(f,a)=>(w(),x(B,null,[i(n($),{title:"Reporte de Ganancias"}),i(O,null,{header:m(()=>[...a[2]||(a[2]=[s("h2",{class:"font-semibold text-xl text-gray-800 leading-tight"}," Reporte Financiero ",-1)])]),default:m(()=>[s("div",M,[s("div",G,[s("div",K,[s("div",q,[a[3]||(a[3]=s("label",{class:"text-sm font-bold text-gray-600"},"Desde",-1)),i(n(b),{modelValue:n(r).start_date,"onUpdate:modelValue":a[0]||(a[0]=p=>n(r).start_date=p),dateFormat:"yy-mm-dd",showIcon:""},null,8,["modelValue"])]),s("div",z,[a[4]||(a[4]=s("label",{class:"text-sm font-bold text-gray-600"},"Hasta",-1)),i(n(b),{modelValue:n(r).end_date,"onUpdate:modelValue":a[1]||(a[1]=p=>n(r).end_date=p),dateFormat:"yy-mm-dd",showIcon:""},null,8,["modelValue"])]),i(n(I),{label:"Filtrar",icon:"pi pi-filter",onClick:o,loading:n(r).processing},null,8,["loading"])]),s("div",H,[s("div",W,[a[5]||(a[5]=s("p",{class:"text-gray-500 text-sm"},"Dinero Prestado",-1)),s("p",J,"- $"+u(t.stats.lent.toLocaleString()),1),a[6]||(a[6]=s("p",{class:"text-xs text-gray-400"},"Salidas de caja",-1))]),s("div",Q,[a[7]||(a[7]=s("p",{class:"text-gray-500 text-sm"},"Total Cobrado",-1)),s("p",X,"+ $"+u(t.stats.collected.toLocaleString()),1),a[8]||(a[8]=s("p",{class:"text-xs text-gray-400"},"Entradas de caja",-1))]),s("div",Y,[a[9]||(a[9]=s("p",{class:"text-gray-500 text-sm font-bold text-green-700"},"GANANCIA NETA (Intereses)",-1)),s("p",Z,"+ $"+u(t.stats.profit.toLocaleString()),1),a[10]||(a[10]=s("p",{class:"text-xs text-gray-400"},"Tu ganancia real descontando capital",-1))]),s("div",{class:E(["bg-white p-6 shadow-sm rounded-lg border-l-4",t.stats.balance>=0?"border-gray-600":"border-red-600"])},[a[11]||(a[11]=s("p",{class:"text-gray-500 text-sm"},"Flujo de Caja (Balance)",-1)),s("p",tt,"$"+u(t.stats.balance.toLocaleString()),1),a[12]||(a[12]=s("p",{class:"text-xs text-gray-400"},"Entradas - Salidas",-1))],2)]),s("div",et,[a[13]||(a[13]=s("h3",{class:"font-bold text-gray-700 mb-4"},"Evolución de Cobros (Día a día)",-1)),s("div",rt,[i(n(C),{type:"line",data:l.value,options:c.value,class:"h-full"},null,8,["data","options"])])])])])]),_:1})],64))}};export{dt as default};
